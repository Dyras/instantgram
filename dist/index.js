"use strict";function localize(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:LANG_DEFAULT;try{if(localization.langs.hasOwnProperty(a)||(a="en-US"),localization.langs[a][e])return localization.langs[a][e]}catch(t){return console.error("[instantgram]LOC error:",t),"ops, a error ocurred in localization system. Enter in https://github.com/theus/instantgram/issues/new and open a issue with this code: 'LOC_dont_found_str_neither_default:["+a+"->"+e+"]'\n    for more information open the console"}}function outdated(e){console.warn(localize("modules.update@oudated_outdated")),console.warn(localize("modules.update@oudated_localInfo").replace("${data.version}",e.version).replace("${data.gitVersion}",e.gitVersion))}function determineIfGetUpdateIsNecessary(){var e=window.localStorage.getItem("instantgram");return!e||(e=JSON.parse(e),e.version!==e.gitVersion&&outdated(e),Date.now()>e.dateExpiration)}function update(e){var a=e.replace(/\./g,"");if(a=parseInt(a),determineIfGetUpdateIsNecessary()){var t=new window.XMLHttpRequest;t.addEventListener("readystatechange",function(){if(console.info(localize("modules.update@determineIfGetUpdateIsNecessary_contacting")),4===this.readyState){var t=new Date;t.setDate(t.getDate()+2),window.localStorage.setItem("instantgram",JSON.stringify({version:e,gitVersion:JSON.parse(this.responseText).version,lastVerification:Date.now(),dateExpiration:t.valueOf()}));var o=JSON.parse(this.responseText).version;if(o=o.replace(/\./g,""),o=parseInt(o),console.info(localize("modules.update@determineIfGetUpdateIsNecessary_updated")),a<o){var r=JSON.parse(window.localStorage.getItem("instantgram"));window.alert(localize("modules.update@determineIfGetUpdateIsNecessary_@alert_found")),outdated(r)}else console.info(window.localStorage.getItem("instantgram"))}}),t.open("GET","https://theus.github.io/instantgram/package.json"),t.send()}}function isElementInViewport(e){var a=e.getBoundingClientRect();return a.bottom>0&&a.right>0&&a.left<(window.innerWidth||document.documentElement.clientWidth)&&a.top<(window.innerHeight||document.documentElement.clientHeight)}var localization={langs:{"en-US":{"helpers.localize_defaultlang":"[instantgram] seted language: ${LANG_DEFAULT} \nfor more information about languages supported, access http://theus.github.io/instantgram","modules.update@oudated_outdated":"[instantgram] is outdated. Please go to http://theus.github.io/instantgram to update","modules.update@oudated_localInfo":"[instantgram] local version: ${data.version} | new update: ${data.gitVersion}","modules.update@determineIfGetUpdateIsNecessary_contacting":"[instantgram] is contacting server looking for updates...","modules.update@determineIfGetUpdateIsNecessary_updated":"[instantgram] updated local data","modules.update@determineIfGetUpdateIsNecessary_@alert_found":"[instantgram] found a update.\n please go to theus.github.io/instantgram for update","index@alert_onlyWorks":"[instantgram] only works in instagram.com","index#program#modal@alert_dontFound":"[instantgram] don't found a image in instagram post. Try open the link in new tab.","index#program#post@alert_dontFound":"ops, [instantgram] don't found the image :(","index#program#screen@alert_dontFound":"[instantgram] the search in screen found more than 1 image. Are you in a profile? If yes, open a photo before run [instantgram]","index#program@alert_dontFound":"ops, are you in a instagram post? ex: instagram.com/p/82jd828jd"},"pt-BR":{"helpers.localize_defaultlang":"[instantgram] idioma configurado: ${LANG_DEFAULT} \npara mais informações sobre os idiomas suportados, acesse http://theus.github.io/instantgram","modules.update@oudated_outdated":"[instantgram] está desatualizado. Acesse http://theus.github.io/instantgram para atualizar","modules.update@oudated_localInfo":"[instantgram] versão local: ${data.version} | nova versão: ${data.gitVersion}","modules.update@determineIfGetUpdateIsNecessary_contacting":"[instantgram] está procurando atualizações...","modules.update@determineIfGetUpdateIsNecessary_updated":"[instantgram] informações locais atualizadas","modules.update@determineIfGetUpdateIsNecessary_@alert_found":"[instantgram] encontrou uma atualização.\n acesse theus.github.io/instantgram para atualizar","index@alert_onlyWorks":"[instantgram] somente funciona no instagram.com","index#program#modal@alert_dontFound":"[instantgram] não encontrou uma imagem em um post. Tente abrir o link em uma nova aba.","index#program#post@alert_dontFound":"ops, [instantgram] não encontrou a imagem :(","index#program#screen@alert_dontFound":"[instantgram] a procura por imagem na tela encontrou mais de 1 imagem. Você está em um perfil? Se sim, abra alguma imagem antes de rodar o [instantgram]","index#program@alert_dontFound":"ops, você está em algum post do instagram? ex: instagram.com/p/82jd828jd"}}},LANG_DEFAULT=navigator.language;console.info(localize("helpers.localize_defaultlang").replace("${LANG_DEFAULT}",LANG_DEFAULT));var VERSION="2.3.1",hostname=window.location.hostname,path=window.location.pathname,images=document.images,videos=document.querySelectorAll("video"),regexOriginalImage=/\/[a-z]+\d+[a-z]?x\d+[a-z]?/,regexPath=/^\/p\//,regexHostname=/instagram\.com/;if(regexHostname.test(hostname)||window.alert(localize("index@alert_onlyWorks")),regexHostname.test(hostname)){var foundVideo=!1,foundImage=!1;try{e:{var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=videos[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var video=_step.value;if(isElementInViewport(video)){var videoLink=video.src;videoLink&&(window.open(videoLink),foundVideo=!0,alertNotInInstagramPost=!0);break e}}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}catch(e){console.error("[instantgram] "+VERSION,e)}try{if(!imageLink&&!foundVideo)e:{var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=images[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var image=_step2.value,isProfileImage="a"===image.parentElement.localName;if(isElementInViewport(image)&&!isProfileImage){imageLink=regexOriginalImage.test(image.src)?image.src.replace(regexOriginalImage,""):image.src,imageLink?(window.open(imageLink),foundImage=!0):window.alert(localize("index#program#screen@alert_dontFound")),alertNotInInstagramPost=!1;break e}}}catch(e){_didIteratorError2=!0,_iteratorError2=e}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}catch(e){console.error("[instantgram] "+VERSION,e)}if(regexPath.test(path)&&!imageLink){if(!foundVideo&&!foundImage){try{if(2===document.getElementsByTagName("article").length){var modal=document.getElementsByTagName("article")[1],modalImage=modal.querySelector("header + div img").src;if(modalImage){var imageLink=regexOriginalImage.test(modalImage)?modalImage.replace(regexOriginalImage,""):modalImage;window.open(imageLink)}else window.alert(localize("index#program#modal@alert_dontFound"))}}catch(e){console.error("[instantgram] "+VERSION,e)}try{if(1===document.getElementsByTagName("article").length){var postImage=document.querySelector("article > div img").src;imageLink=regexOriginalImage.test(postImage)?postImage.replace(regexOriginalImage,""):postImage,imageLink?window.open(imageLink):window.alert(localize("index#program#post@alert_dontFound"))}}catch(e){console.error("[instantgram] "+VERSION,e)}}}else var alertNotInInstagramPost=!0;!alertNotInInstagramPost||foundVideo||foundImage||window.alert(localize("index#program@alert_dontFound")),update(VERSION)}