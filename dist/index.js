"use strict";function localize(e){var t=arguments.length<=1||void 0===arguments[1]?LANG_DEFAULT:arguments[1];try{if(localization.langs.hasOwnProperty(t)||(t="en-US"),localization.langs[t][e])return localization.langs[t][e]}catch(a){return console.error("[instantgram]LOC error:",a),"ops, a error ocurred in localization system. Enter in https://github.com/theus/instantgram/issues/new and open a issue with this code: 'LOC_dont_found_str_neither_default:["+t+"->"+e+"]'\n    for more information open the console"}}function outdated(e){console.warn(localize("modules.update@oudated_outdated")),console.warn(localize("modules.update@oudated_localInfo").replace("${data.version}",e.version).replace("${data.gitVersion}",e.gitVersion))}function determineIfGetUpdateIsNecessary(){var e=localStorage.getItem("instantgram");return!e||(e=JSON.parse(e),e.version!==e.gitVersion&&outdated(e),Date.now()>e.dateExpiration)}function update(e){var t=e.replace(/\./g,"");if(t=parseInt(t),determineIfGetUpdateIsNecessary()){var a=new XMLHttpRequest;a.addEventListener("readystatechange",function(){if(console.info(localize("modules.update@determineIfGetUpdateIsNecessary_contacting")),4===this.readyState){var a=new Date;a.setDate(a.getDate()+2),localStorage.setItem("instantgram",JSON.stringify({version:e,gitVersion:JSON.parse(this.responseText).version,lastVerification:Date.now(),dateExpiration:a.valueOf()}));var o=JSON.parse(this.responseText).version;if(o=o.replace(/\./g,""),o=parseInt(o),console.info(localize("modules.update@determineIfGetUpdateIsNecessary_updated")),t<o){var r=JSON.parse(localStorage.getItem("instantgram"));alert(localize("modules.update@determineIfGetUpdateIsNecessary_@alert_found")),outdated(r)}else console.info(localStorage.getItem("instantgram"))}}),a.open("GET","https://theus.github.io/instantgram/package.json"),a.send()}}function isElementInViewport(e){var t=e.getBoundingClientRect();return t.bottom>0&&t.right>0&&t.left<(window.innerWidth||document.documentElement.clientWidth)&&t.top<(window.innerHeight||document.documentElement.clientHeight)}var localization={langs:{"en-US":{"helpers.localize_defaultlang":"[instantgram] seted language: ${LANG_DEFAULT} \nfor more information about languages supported, access http://theus.github.io/instantgram","modules.update@oudated_outdated":"[instantgram] is outdated. Please go to http://theus.github.io/instantgram to update","modules.update@oudated_localInfo":"[instantgram] local version: ${data.version} | new update: ${data.gitVersion}","modules.update@determineIfGetUpdateIsNecessary_contacting":"[instantgram] is contacting server looking for updates...","modules.update@determineIfGetUpdateIsNecessary_updated":"[instantgram] updated local data","modules.update@determineIfGetUpdateIsNecessary_@alert_found":"[instantgram] found a update.\n please go to theus.github.io/instantgram for update","index@alert_onlyWorks":"[instantgram] only works in instagram.com","index#program#modal@alert_dontFound":"[instantgram] don't found a image in instagram post. Try open the link in new tab.","index#program#post@alert_dontFound":"ops, [instantgram] don't found the image :(","index#program#screen@alert_dontFound":"[instantgram] the search in screen found more than 1 image. Are you in a profile? If yes, open a photo before run [instantgram]","index#program@alert_dontFound":"ops, are you in a instagram post? ex: instagram.com/p/82jd828jd"},"pt-BR":{"helpers.localize_defaultlang":"[instantgram] idioma configurado: ${LANG_DEFAULT} \npara mais informações sobre os idiomas suportados, acesse http://theus.github.io/instantgram","modules.update@oudated_outdated":"[instantgram] está desatualizado. Acesse http://theus.github.io/instantgram para atualizar","modules.update@oudated_localInfo":"[instantgram] versão local: ${data.version} | nova versão: ${data.gitVersion}","modules.update@determineIfGetUpdateIsNecessary_contacting":"[instantgram] está procurando atualizações...","modules.update@determineIfGetUpdateIsNecessary_updated":"[instantgram] informações locais atualizadas","modules.update@determineIfGetUpdateIsNecessary_@alert_found":"[instantgram] encontrou uma atualização.\n acesse theus.github.io/instantgram para atualizar","index@alert_onlyWorks":"[instantgram] somente funciona no instagram.com","index#program#modal@alert_dontFound":"[instantgram] não encontrou uma imagem em um post. Tente abrir o link em uma nova aba.","index#program#post@alert_dontFound":"ops, [instantgram] não encontrou a imagem :(","index#program#screen@alert_dontFound":"[instantgram] a procura por imagem na tela encontrou mais de 1 imagem. Você está em um perfil? Se sim, abra alguma imagem antes de rodar o [instantgram]","index#program@alert_dontFound":"ops, você está em algum post do instagram? ex: instagram.com/p/82jd828jd"}}},LANG_DEFAULT=navigator.language;console.info(localize("helpers.localize_defaultlang").replace("${LANG_DEFAULT}",LANG_DEFAULT));var VERSION="2.3.0",hostname=location.hostname,path=location.pathname,regex_original_image=/\/[a-z]+\d+[a-z]?x\d+[a-z]?/,regex_path=/^\/p\//,regex_image_id=/pImage_\d+/,regex_hostname=/instagram\.com/;if(regex_hostname.test(hostname)||alert(localize("index@alert_onlyWorks")),regex_hostname.test(hostname)){var foundVideo=!1;try{e:{var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=document.querySelectorAll("video")[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var video=_step.value;if(isElementInViewport(video)){var video_link=video.src;video_link&&(window.open(video_link),foundVideo=!0,alertNotInInstagramPost=!0);break e}}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}catch(e){console.error("[instantgram] "+VERSION,e)}if(regex_path.test(path)){if(!foundVideo){try{if(2===document.getElementsByTagName("article").length){var modal=document.getElementsByTagName("article")[1],modal_image=modal.querySelector("header + div img").src;if(modal_image){var image_link=regex_original_image.test(modal_image)?modal_image.replace(regex_original_image,""):modal_image;window.open(image_link)}else alert(localize("index#program#modal@alert_dontFound"))}}catch(e){console.error("[instantgram] "+VERSION,e)}try{if(1===document.getElementsByTagName("article").length){var post=document.getElementsByTagName("article")[0],post_image=document.querySelector("article > div img").src,image_link=regex_original_image.test(post_image)?post_image.replace(regex_original_image,""):post_image;image_link?window.open(image_link):alert(localize("index#program#post@alert_dontFound"))}}catch(e){console.error("[instantgram] "+VERSION,e)}}}else var alertNotInInstagramPost=!0;try{if(!image_link&&!foundVideo)e:{var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=document.images[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var image=_step2.value;if(regex_image_id.test(image.id)&&isElementInViewport(image)){var image_link=regex_original_image.test(image.src)?image.src.replace(regex_original_image,""):image.src;image_link?window.open(image_link):alert(localize("index#program#screen@alert_dontFound")),alertNotInInstagramPost=!1;break e}}}catch(e){_didIteratorError2=!0,_iteratorError2=e}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}}catch(e){console.error("[instantgram] "+VERSION,e)}alertNotInInstagramPost&&!foundVideo&&alert(localize("index#program@alert_dontFound")),update(VERSION)}